---
source: prql-compiler/src/parser.rs
expression: "parse_tree_of_str(r#\"\nfrom employees\nfilter country == \"USA\"                           # Each line transforms the previous result.\nderive [                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]\nfilter gross_cost > 0\ngroup [title, country] (\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)\nsort sum_gross_cost\nfilter count > 200\ntake 20\n    \"#.trim(),\n        Rule::pipeline).unwrap()"
---
[
    Pair {
        rule: pipeline,
        span: Span {
            str: "from employees\nfilter country == \"USA\"                           # Each line transforms the previous result.\nderive [                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]\nfilter gross_cost > 0\ngroup [title, country] (\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)\nsort sum_gross_cost\nfilter count > 200\ntake 20",
            start: 0,
            end: 778,
        },
        inner: [
            Pair {
                rule: func_curry,
                span: Span {
                    str: "from employees",
                    start: 0,
                    end: 14,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "from",
                            start: 0,
                            end: 4,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "employees",
                            start: 5,
                            end: 14,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "employees",
                                    start: 5,
                                    end: 14,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "employees",
                                            start: 5,
                                            end: 14,
                                        },
                                        inner: [
                                            Pair {
                                                rule: ident,
                                                span: Span {
                                                    str: "employees",
                                                    start: 5,
                                                    end: 14,
                                                },
                                                inner: [],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "filter country == \"USA\"                           # Each line transforms the previous result.",
                    start: 15,
                    end: 108,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "filter",
                            start: 15,
                            end: 21,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "country == \"USA\"                           # Each line transforms the previous result.",
                            start: 22,
                            end: 108,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "country == \"USA\"                           # Each line transforms the previous result.",
                                    start: 22,
                                    end: 108,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "country == \"USA\"                           # Each line transforms the previous result.",
                                            start: 22,
                                            end: 108,
                                        },
                                        inner: [
                                            Pair {
                                                rule: ident,
                                                span: Span {
                                                    str: "country",
                                                    start: 22,
                                                    end: 29,
                                                },
                                                inner: [],
                                            },
                                            Pair {
                                                rule: operator_compare,
                                                span: Span {
                                                    str: "==",
                                                    start: 30,
                                                    end: 32,
                                                },
                                                inner: [],
                                            },
                                            Pair {
                                                rule: string,
                                                span: Span {
                                                    str: "\"USA\"",
                                                    start: 33,
                                                    end: 38,
                                                },
                                                inner: [
                                                    Pair {
                                                        rule: string_inner,
                                                        span: Span {
                                                            str: "USA",
                                                            start: 34,
                                                            end: 37,
                                                        },
                                                        inner: [],
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "derive [                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]",
                    start: 109,
                    end: 317,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "derive",
                            start: 109,
                            end: 115,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "[                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]",
                            start: 116,
                            end: 317,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "[                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]",
                                    start: 116,
                                    end: 317,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "[                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]",
                                            start: 116,
                                            end: 317,
                                        },
                                        inner: [
                                            Pair {
                                                rule: list,
                                                span: Span {
                                                    str: "[                                         # This adds columns / variables.\n  gross_salary = salary + payroll_tax,\n  gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.\n]",
                                                    start: 116,
                                                    end: 317,
                                                },
                                                inner: [
                                                    Pair {
                                                        rule: assign_call,
                                                        span: Span {
                                                            str: "gross_salary = salary + payroll_tax",
                                                            start: 193,
                                                            end: 228,
                                                        },
                                                        inner: [
                                                            Pair {
                                                                rule: ident,
                                                                span: Span {
                                                                    str: "gross_salary",
                                                                    start: 193,
                                                                    end: 205,
                                                                },
                                                                inner: [],
                                                            },
                                                            Pair {
                                                                rule: expr_call,
                                                                span: Span {
                                                                    str: "salary + payroll_tax",
                                                                    start: 208,
                                                                    end: 228,
                                                                },
                                                                inner: [
                                                                    Pair {
                                                                        rule: expr,
                                                                        span: Span {
                                                                            str: "salary + payroll_tax",
                                                                            start: 208,
                                                                            end: 228,
                                                                        },
                                                                        inner: [
                                                                            Pair {
                                                                                rule: expr_coalesce,
                                                                                span: Span {
                                                                                    str: "salary + payroll_tax",
                                                                                    start: 208,
                                                                                    end: 228,
                                                                                },
                                                                                inner: [
                                                                                    Pair {
                                                                                        rule: expr_compare,
                                                                                        span: Span {
                                                                                            str: "salary + payroll_tax",
                                                                                            start: 208,
                                                                                            end: 228,
                                                                                        },
                                                                                        inner: [
                                                                                            Pair {
                                                                                                rule: ident,
                                                                                                span: Span {
                                                                                                    str: "salary",
                                                                                                    start: 208,
                                                                                                    end: 214,
                                                                                                },
                                                                                                inner: [],
                                                                                            },
                                                                                            Pair {
                                                                                                rule: operator_add,
                                                                                                span: Span {
                                                                                                    str: "+",
                                                                                                    start: 215,
                                                                                                    end: 216,
                                                                                                },
                                                                                                inner: [],
                                                                                            },
                                                                                            Pair {
                                                                                                rule: ident,
                                                                                                span: Span {
                                                                                                    str: "payroll_tax",
                                                                                                    start: 217,
                                                                                                    end: 228,
                                                                                                },
                                                                                                inner: [],
                                                                                            },
                                                                                        ],
                                                                                    },
                                                                                ],
                                                                            },
                                                                        ],
                                                                    },
                                                                ],
                                                            },
                                                        ],
                                                    },
                                                    Pair {
                                                        rule: assign_call,
                                                        span: Span {
                                                            str: "gross_cost   = gross_salary + benefits_cost    # Variables can use other variables.",
                                                            start: 232,
                                                            end: 315,
                                                        },
                                                        inner: [
                                                            Pair {
                                                                rule: ident,
                                                                span: Span {
                                                                    str: "gross_cost",
                                                                    start: 232,
                                                                    end: 242,
                                                                },
                                                                inner: [],
                                                            },
                                                            Pair {
                                                                rule: expr_call,
                                                                span: Span {
                                                                    str: "gross_salary + benefits_cost    # Variables can use other variables.",
                                                                    start: 247,
                                                                    end: 315,
                                                                },
                                                                inner: [
                                                                    Pair {
                                                                        rule: expr,
                                                                        span: Span {
                                                                            str: "gross_salary + benefits_cost    # Variables can use other variables.",
                                                                            start: 247,
                                                                            end: 315,
                                                                        },
                                                                        inner: [
                                                                            Pair {
                                                                                rule: expr_coalesce,
                                                                                span: Span {
                                                                                    str: "gross_salary + benefits_cost    # Variables can use other variables.",
                                                                                    start: 247,
                                                                                    end: 315,
                                                                                },
                                                                                inner: [
                                                                                    Pair {
                                                                                        rule: expr_compare,
                                                                                        span: Span {
                                                                                            str: "gross_salary + benefits_cost    # Variables can use other variables.",
                                                                                            start: 247,
                                                                                            end: 315,
                                                                                        },
                                                                                        inner: [
                                                                                            Pair {
                                                                                                rule: ident,
                                                                                                span: Span {
                                                                                                    str: "gross_salary",
                                                                                                    start: 247,
                                                                                                    end: 259,
                                                                                                },
                                                                                                inner: [],
                                                                                            },
                                                                                            Pair {
                                                                                                rule: operator_add,
                                                                                                span: Span {
                                                                                                    str: "+",
                                                                                                    start: 260,
                                                                                                    end: 261,
                                                                                                },
                                                                                                inner: [],
                                                                                            },
                                                                                            Pair {
                                                                                                rule: ident,
                                                                                                span: Span {
                                                                                                    str: "benefits_cost",
                                                                                                    start: 262,
                                                                                                    end: 275,
                                                                                                },
                                                                                                inner: [],
                                                                                            },
                                                                                        ],
                                                                                    },
                                                                                ],
                                                                            },
                                                                        ],
                                                                    },
                                                                ],
                                                            },
                                                        ],
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "filter gross_cost > 0",
                    start: 318,
                    end: 339,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "filter",
                            start: 318,
                            end: 324,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "gross_cost > 0",
                            start: 325,
                            end: 339,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "gross_cost > 0",
                                    start: 325,
                                    end: 339,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "gross_cost > 0",
                                            start: 325,
                                            end: 339,
                                        },
                                        inner: [
                                            Pair {
                                                rule: ident,
                                                span: Span {
                                                    str: "gross_cost",
                                                    start: 325,
                                                    end: 335,
                                                },
                                                inner: [],
                                            },
                                            Pair {
                                                rule: operator_compare,
                                                span: Span {
                                                    str: ">",
                                                    start: 336,
                                                    end: 337,
                                                },
                                                inner: [],
                                            },
                                            Pair {
                                                rule: number,
                                                span: Span {
                                                    str: "0",
                                                    start: 338,
                                                    end: 339,
                                                },
                                                inner: [],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "group [title, country] (\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)",
                    start: 340,
                    end: 731,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "group",
                            start: 340,
                            end: 345,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "[title, country] ",
                            start: 346,
                            end: 363,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "[title, country] ",
                                    start: 346,
                                    end: 363,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "[title, country] ",
                                            start: 346,
                                            end: 363,
                                        },
                                        inner: [
                                            Pair {
                                                rule: list,
                                                span: Span {
                                                    str: "[title, country]",
                                                    start: 346,
                                                    end: 362,
                                                },
                                                inner: [
                                                    Pair {
                                                        rule: expr_call,
                                                        span: Span {
                                                            str: "title",
                                                            start: 347,
                                                            end: 352,
                                                        },
                                                        inner: [
                                                            Pair {
                                                                rule: expr,
                                                                span: Span {
                                                                    str: "title",
                                                                    start: 347,
                                                                    end: 352,
                                                                },
                                                                inner: [
                                                                    Pair {
                                                                        rule: expr_coalesce,
                                                                        span: Span {
                                                                            str: "title",
                                                                            start: 347,
                                                                            end: 352,
                                                                        },
                                                                        inner: [
                                                                            Pair {
                                                                                rule: expr_compare,
                                                                                span: Span {
                                                                                    str: "title",
                                                                                    start: 347,
                                                                                    end: 352,
                                                                                },
                                                                                inner: [
                                                                                    Pair {
                                                                                        rule: ident,
                                                                                        span: Span {
                                                                                            str: "title",
                                                                                            start: 347,
                                                                                            end: 352,
                                                                                        },
                                                                                        inner: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                        ],
                                                                    },
                                                                ],
                                                            },
                                                        ],
                                                    },
                                                    Pair {
                                                        rule: expr_call,
                                                        span: Span {
                                                            str: "country",
                                                            start: 354,
                                                            end: 361,
                                                        },
                                                        inner: [
                                                            Pair {
                                                                rule: expr,
                                                                span: Span {
                                                                    str: "country",
                                                                    start: 354,
                                                                    end: 361,
                                                                },
                                                                inner: [
                                                                    Pair {
                                                                        rule: expr_coalesce,
                                                                        span: Span {
                                                                            str: "country",
                                                                            start: 354,
                                                                            end: 361,
                                                                        },
                                                                        inner: [
                                                                            Pair {
                                                                                rule: expr_compare,
                                                                                span: Span {
                                                                                    str: "country",
                                                                                    start: 354,
                                                                                    end: 361,
                                                                                },
                                                                                inner: [
                                                                                    Pair {
                                                                                        rule: ident,
                                                                                        span: Span {
                                                                                            str: "country",
                                                                                            start: 354,
                                                                                            end: 361,
                                                                                        },
                                                                                        inner: [],
                                                                                    },
                                                                                ],
                                                                            },
                                                                        ],
                                                                    },
                                                                ],
                                                            },
                                                        ],
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "(\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)",
                            start: 363,
                            end: 731,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "(\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)",
                                    start: 363,
                                    end: 731,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "(\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)",
                                            start: 363,
                                            end: 731,
                                        },
                                        inner: [
                                            Pair {
                                                rule: nested_pipeline,
                                                span: Span {
                                                    str: "(\n    aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]\n)",
                                                    start: 363,
                                                    end: 731,
                                                },
                                                inner: [
                                                    Pair {
                                                        rule: pipeline,
                                                        span: Span {
                                                            str: "aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]",
                                                            start: 369,
                                                            end: 729,
                                                        },
                                                        inner: [
                                                            Pair {
                                                                rule: func_curry,
                                                                span: Span {
                                                                    str: "aggregate [                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]",
                                                                    start: 369,
                                                                    end: 729,
                                                                },
                                                                inner: [
                                                                    Pair {
                                                                        rule: ident,
                                                                        span: Span {
                                                                            str: "aggregate",
                                                                            start: 369,
                                                                            end: 378,
                                                                        },
                                                                        inner: [],
                                                                    },
                                                                    Pair {
                                                                        rule: expr,
                                                                        span: Span {
                                                                            str: "[                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]",
                                                                            start: 379,
                                                                            end: 729,
                                                                        },
                                                                        inner: [
                                                                            Pair {
                                                                                rule: expr_coalesce,
                                                                                span: Span {
                                                                                    str: "[                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]",
                                                                                    start: 379,
                                                                                    end: 729,
                                                                                },
                                                                                inner: [
                                                                                    Pair {
                                                                                        rule: expr_compare,
                                                                                        span: Span {
                                                                                            str: "[                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]",
                                                                                            start: 379,
                                                                                            end: 729,
                                                                                        },
                                                                                        inner: [
                                                                                            Pair {
                                                                                                rule: list,
                                                                                                span: Span {
                                                                                                    str: "[                                  # `by` are the columns to group by.\n        average salary,                          # These are aggregation calcs run on each group.\n        sum     salary,\n        average gross_salary,\n        sum     gross_salary,\n        average gross_cost,\n        sum_gross_cost = sum gross_cost,\n        count = count,\n    ]",
                                                                                                    start: 379,
                                                                                                    end: 729,
                                                                                                },
                                                                                                inner: [
                                                                                                    Pair {
                                                                                                        rule: expr_call,
                                                                                                        span: Span {
                                                                                                            str: "average salary",
                                                                                                            start: 458,
                                                                                                            end: 472,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: func_call,
                                                                                                                span: Span {
                                                                                                                    str: "average salary",
                                                                                                                    start: 458,
                                                                                                                    end: 472,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: ident,
                                                                                                                        span: Span {
                                                                                                                            str: "average",
                                                                                                                            start: 458,
                                                                                                                            end: 465,
                                                                                                                        },
                                                                                                                        inner: [],
                                                                                                                    },
                                                                                                                    Pair {
                                                                                                                        rule: expr,
                                                                                                                        span: Span {
                                                                                                                            str: "salary",
                                                                                                                            start: 466,
                                                                                                                            end: 472,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: expr_coalesce,
                                                                                                                                span: Span {
                                                                                                                                    str: "salary",
                                                                                                                                    start: 466,
                                                                                                                                    end: 472,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_compare,
                                                                                                                                        span: Span {
                                                                                                                                            str: "salary",
                                                                                                                                            start: 466,
                                                                                                                                            end: 472,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: ident,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "salary",
                                                                                                                                                    start: 466,
                                                                                                                                                    end: 472,
                                                                                                                                                },
                                                                                                                                                inner: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                    Pair {
                                                                                                        rule: expr_call,
                                                                                                        span: Span {
                                                                                                            str: "sum     salary",
                                                                                                            start: 556,
                                                                                                            end: 570,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: func_call,
                                                                                                                span: Span {
                                                                                                                    str: "sum     salary",
                                                                                                                    start: 556,
                                                                                                                    end: 570,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: ident,
                                                                                                                        span: Span {
                                                                                                                            str: "sum",
                                                                                                                            start: 556,
                                                                                                                            end: 559,
                                                                                                                        },
                                                                                                                        inner: [],
                                                                                                                    },
                                                                                                                    Pair {
                                                                                                                        rule: expr,
                                                                                                                        span: Span {
                                                                                                                            str: "salary",
                                                                                                                            start: 564,
                                                                                                                            end: 570,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: expr_coalesce,
                                                                                                                                span: Span {
                                                                                                                                    str: "salary",
                                                                                                                                    start: 564,
                                                                                                                                    end: 570,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_compare,
                                                                                                                                        span: Span {
                                                                                                                                            str: "salary",
                                                                                                                                            start: 564,
                                                                                                                                            end: 570,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: ident,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "salary",
                                                                                                                                                    start: 564,
                                                                                                                                                    end: 570,
                                                                                                                                                },
                                                                                                                                                inner: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                    Pair {
                                                                                                        rule: expr_call,
                                                                                                        span: Span {
                                                                                                            str: "average gross_salary",
                                                                                                            start: 580,
                                                                                                            end: 600,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: func_call,
                                                                                                                span: Span {
                                                                                                                    str: "average gross_salary",
                                                                                                                    start: 580,
                                                                                                                    end: 600,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: ident,
                                                                                                                        span: Span {
                                                                                                                            str: "average",
                                                                                                                            start: 580,
                                                                                                                            end: 587,
                                                                                                                        },
                                                                                                                        inner: [],
                                                                                                                    },
                                                                                                                    Pair {
                                                                                                                        rule: expr,
                                                                                                                        span: Span {
                                                                                                                            str: "gross_salary",
                                                                                                                            start: 588,
                                                                                                                            end: 600,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: expr_coalesce,
                                                                                                                                span: Span {
                                                                                                                                    str: "gross_salary",
                                                                                                                                    start: 588,
                                                                                                                                    end: 600,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_compare,
                                                                                                                                        span: Span {
                                                                                                                                            str: "gross_salary",
                                                                                                                                            start: 588,
                                                                                                                                            end: 600,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: ident,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "gross_salary",
                                                                                                                                                    start: 588,
                                                                                                                                                    end: 600,
                                                                                                                                                },
                                                                                                                                                inner: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                    Pair {
                                                                                                        rule: expr_call,
                                                                                                        span: Span {
                                                                                                            str: "sum     gross_salary",
                                                                                                            start: 610,
                                                                                                            end: 630,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: func_call,
                                                                                                                span: Span {
                                                                                                                    str: "sum     gross_salary",
                                                                                                                    start: 610,
                                                                                                                    end: 630,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: ident,
                                                                                                                        span: Span {
                                                                                                                            str: "sum",
                                                                                                                            start: 610,
                                                                                                                            end: 613,
                                                                                                                        },
                                                                                                                        inner: [],
                                                                                                                    },
                                                                                                                    Pair {
                                                                                                                        rule: expr,
                                                                                                                        span: Span {
                                                                                                                            str: "gross_salary",
                                                                                                                            start: 618,
                                                                                                                            end: 630,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: expr_coalesce,
                                                                                                                                span: Span {
                                                                                                                                    str: "gross_salary",
                                                                                                                                    start: 618,
                                                                                                                                    end: 630,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_compare,
                                                                                                                                        span: Span {
                                                                                                                                            str: "gross_salary",
                                                                                                                                            start: 618,
                                                                                                                                            end: 630,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: ident,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "gross_salary",
                                                                                                                                                    start: 618,
                                                                                                                                                    end: 630,
                                                                                                                                                },
                                                                                                                                                inner: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                    Pair {
                                                                                                        rule: expr_call,
                                                                                                        span: Span {
                                                                                                            str: "average gross_cost",
                                                                                                            start: 640,
                                                                                                            end: 658,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: func_call,
                                                                                                                span: Span {
                                                                                                                    str: "average gross_cost",
                                                                                                                    start: 640,
                                                                                                                    end: 658,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: ident,
                                                                                                                        span: Span {
                                                                                                                            str: "average",
                                                                                                                            start: 640,
                                                                                                                            end: 647,
                                                                                                                        },
                                                                                                                        inner: [],
                                                                                                                    },
                                                                                                                    Pair {
                                                                                                                        rule: expr,
                                                                                                                        span: Span {
                                                                                                                            str: "gross_cost",
                                                                                                                            start: 648,
                                                                                                                            end: 658,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: expr_coalesce,
                                                                                                                                span: Span {
                                                                                                                                    str: "gross_cost",
                                                                                                                                    start: 648,
                                                                                                                                    end: 658,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_compare,
                                                                                                                                        span: Span {
                                                                                                                                            str: "gross_cost",
                                                                                                                                            start: 648,
                                                                                                                                            end: 658,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: ident,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "gross_cost",
                                                                                                                                                    start: 648,
                                                                                                                                                    end: 658,
                                                                                                                                                },
                                                                                                                                                inner: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                    Pair {
                                                                                                        rule: assign_call,
                                                                                                        span: Span {
                                                                                                            str: "sum_gross_cost = sum gross_cost",
                                                                                                            start: 668,
                                                                                                            end: 699,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: ident,
                                                                                                                span: Span {
                                                                                                                    str: "sum_gross_cost",
                                                                                                                    start: 668,
                                                                                                                    end: 682,
                                                                                                                },
                                                                                                                inner: [],
                                                                                                            },
                                                                                                            Pair {
                                                                                                                rule: expr_call,
                                                                                                                span: Span {
                                                                                                                    str: "sum gross_cost",
                                                                                                                    start: 685,
                                                                                                                    end: 699,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: func_call,
                                                                                                                        span: Span {
                                                                                                                            str: "sum gross_cost",
                                                                                                                            start: 685,
                                                                                                                            end: 699,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: ident,
                                                                                                                                span: Span {
                                                                                                                                    str: "sum",
                                                                                                                                    start: 685,
                                                                                                                                    end: 688,
                                                                                                                                },
                                                                                                                                inner: [],
                                                                                                                            },
                                                                                                                            Pair {
                                                                                                                                rule: expr,
                                                                                                                                span: Span {
                                                                                                                                    str: "gross_cost",
                                                                                                                                    start: 689,
                                                                                                                                    end: 699,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_coalesce,
                                                                                                                                        span: Span {
                                                                                                                                            str: "gross_cost",
                                                                                                                                            start: 689,
                                                                                                                                            end: 699,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: expr_compare,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "gross_cost",
                                                                                                                                                    start: 689,
                                                                                                                                                    end: 699,
                                                                                                                                                },
                                                                                                                                                inner: [
                                                                                                                                                    Pair {
                                                                                                                                                        rule: ident,
                                                                                                                                                        span: Span {
                                                                                                                                                            str: "gross_cost",
                                                                                                                                                            start: 689,
                                                                                                                                                            end: 699,
                                                                                                                                                        },
                                                                                                                                                        inner: [],
                                                                                                                                                    },
                                                                                                                                                ],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                    Pair {
                                                                                                        rule: assign_call,
                                                                                                        span: Span {
                                                                                                            str: "count = count",
                                                                                                            start: 709,
                                                                                                            end: 722,
                                                                                                        },
                                                                                                        inner: [
                                                                                                            Pair {
                                                                                                                rule: ident,
                                                                                                                span: Span {
                                                                                                                    str: "count",
                                                                                                                    start: 709,
                                                                                                                    end: 714,
                                                                                                                },
                                                                                                                inner: [],
                                                                                                            },
                                                                                                            Pair {
                                                                                                                rule: expr_call,
                                                                                                                span: Span {
                                                                                                                    str: "count",
                                                                                                                    start: 717,
                                                                                                                    end: 722,
                                                                                                                },
                                                                                                                inner: [
                                                                                                                    Pair {
                                                                                                                        rule: expr,
                                                                                                                        span: Span {
                                                                                                                            str: "count",
                                                                                                                            start: 717,
                                                                                                                            end: 722,
                                                                                                                        },
                                                                                                                        inner: [
                                                                                                                            Pair {
                                                                                                                                rule: expr_coalesce,
                                                                                                                                span: Span {
                                                                                                                                    str: "count",
                                                                                                                                    start: 717,
                                                                                                                                    end: 722,
                                                                                                                                },
                                                                                                                                inner: [
                                                                                                                                    Pair {
                                                                                                                                        rule: expr_compare,
                                                                                                                                        span: Span {
                                                                                                                                            str: "count",
                                                                                                                                            start: 717,
                                                                                                                                            end: 722,
                                                                                                                                        },
                                                                                                                                        inner: [
                                                                                                                                            Pair {
                                                                                                                                                rule: ident,
                                                                                                                                                span: Span {
                                                                                                                                                    str: "count",
                                                                                                                                                    start: 717,
                                                                                                                                                    end: 722,
                                                                                                                                                },
                                                                                                                                                inner: [],
                                                                                                                                            },
                                                                                                                                        ],
                                                                                                                                    },
                                                                                                                                ],
                                                                                                                            },
                                                                                                                        ],
                                                                                                                    },
                                                                                                                ],
                                                                                                            },
                                                                                                        ],
                                                                                                    },
                                                                                                ],
                                                                                            },
                                                                                        ],
                                                                                    },
                                                                                ],
                                                                            },
                                                                        ],
                                                                    },
                                                                ],
                                                            },
                                                        ],
                                                    },
                                                ],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "sort sum_gross_cost",
                    start: 732,
                    end: 751,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "sort",
                            start: 732,
                            end: 736,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "sum_gross_cost",
                            start: 737,
                            end: 751,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "sum_gross_cost",
                                    start: 737,
                                    end: 751,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "sum_gross_cost",
                                            start: 737,
                                            end: 751,
                                        },
                                        inner: [
                                            Pair {
                                                rule: ident,
                                                span: Span {
                                                    str: "sum_gross_cost",
                                                    start: 737,
                                                    end: 751,
                                                },
                                                inner: [],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "filter count > 200",
                    start: 752,
                    end: 770,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "filter",
                            start: 752,
                            end: 758,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "count > 200",
                            start: 759,
                            end: 770,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "count > 200",
                                    start: 759,
                                    end: 770,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "count > 200",
                                            start: 759,
                                            end: 770,
                                        },
                                        inner: [
                                            Pair {
                                                rule: ident,
                                                span: Span {
                                                    str: "count",
                                                    start: 759,
                                                    end: 764,
                                                },
                                                inner: [],
                                            },
                                            Pair {
                                                rule: operator_compare,
                                                span: Span {
                                                    str: ">",
                                                    start: 765,
                                                    end: 766,
                                                },
                                                inner: [],
                                            },
                                            Pair {
                                                rule: number,
                                                span: Span {
                                                    str: "200",
                                                    start: 767,
                                                    end: 770,
                                                },
                                                inner: [],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
            Pair {
                rule: func_curry,
                span: Span {
                    str: "take 20",
                    start: 771,
                    end: 778,
                },
                inner: [
                    Pair {
                        rule: ident,
                        span: Span {
                            str: "take",
                            start: 771,
                            end: 775,
                        },
                        inner: [],
                    },
                    Pair {
                        rule: expr,
                        span: Span {
                            str: "20",
                            start: 776,
                            end: 778,
                        },
                        inner: [
                            Pair {
                                rule: expr_coalesce,
                                span: Span {
                                    str: "20",
                                    start: 776,
                                    end: 778,
                                },
                                inner: [
                                    Pair {
                                        rule: expr_compare,
                                        span: Span {
                                            str: "20",
                                            start: 776,
                                            end: 778,
                                        },
                                        inner: [
                                            Pair {
                                                rule: number,
                                                span: Span {
                                                    str: "20",
                                                    start: 776,
                                                    end: 778,
                                                },
                                                inner: [],
                                            },
                                        ],
                                    },
                                ],
                            },
                        ],
                    },
                ],
            },
        ],
    },
]
